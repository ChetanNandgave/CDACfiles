package com.sunbeam.quiz.dao;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.List;

import com.sunbeam.quiz.entity.Student;
import com.sunbeam.quiz.util.DbUtil;

public class StudentDao implements AutoCloseable {
	
	private Connection connection=null;
	
	public StudentDao () throws SQLException {
	connection=DbUtil.getConnection();
	}
	
	public List<Student> getAllStudents() throws SQLException{
		List<Student> studentList=new ArrayList<>();
		String sql="SELECT rollno,name,email,course FROM students";
		try(PreparedStatement selectStatement=connection.prepareStatement(sql)){
			ResultSet rs=selectStatement.executeQuery();
			while(rs.next()) {
				Student student=new Student();
				student.setRollno(rs.getInt(1));
				student.setName(rs.getString(2));
				student.setEmail(rs.getString(3));
				student.setCourse(rs.getString(4));
				studentList.add(student);
			}
		}
		
		return studentList;
		
	}
	public void insertStudent(Student student) {
		String sql="INSERT INTO students (name,email,course) VALUES(?,?,?)";
		try(PreparedStatament insertStatement)
	}
	
	@Override
	public void close() throws Exception {
		// TODO Auto-generated method stub
		
	}

}
